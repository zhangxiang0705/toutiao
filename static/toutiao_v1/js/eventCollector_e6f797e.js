!function(e){"object"==typeof module&&module.hasOwnProperty("exports")&&"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):window[window.MarioJSSDKObject]=e()}(function(){function e(e,t){s(A,"user",e,t)}function t(e,t){s(A,"header",e,t)}function n(e){A.header.app_id=e}function r(e,t){s(A.header,"headers",e,t)}function o(e,t){A.header.headers=A.header.headers||{},s(A.header.headers,"custom",e,t)}function a(e){O(I,e)}function i(e){O(q,e)}function s(e,t,n,r){if("object"!=typeof n)throw"objValue 必须是个对象。";r="undefined"==typeof r?!0:r,r?(e[t]||(e[t]={}),O(e[t],n)):e[t]=n}function f(e){D=e!==!1}function u(e){H=e}function c(e){e="undefined"==typeof e?!1:e,_=e,A.verbose=e?1:0}function d(e){A.caller=e}function p(e,t){if(!M(e)){if(void 0===t&&(t={}),"object"!=typeof t)throw"params的类型不正确！";e=[[e,t]]}var n,r=[];for(n=0;n<e.length;n++){var o=e[n][1]||{};O(o,I),r.push({event:e[n][0],params:o})}if(E)h(A.user,A.header,r);else for(n=0;n<r.length;n++)F.push(r[n])}function h(e,t,n){M(n)||(n=[n]);for(var r=0;r<n.length;r++)n[r].params=x.stringify(n[r].params);var o;t.headers&&(o=x.stringify(t.headers));var a={};O(a,t),a.headers=o;var i={user:e,header:a,events:n};1===A.verbose&&(i.verbose=1),A.caller&&(i.caller=A.caller),y(i)}function l(){var e=0;for(var t in q)if(q.hasOwnProperty(t)){var n=q[t];if(n.length>0)for(var r=0;r<n.length;r++){var o=n[r],a="eventCommonParams"===t?I:A[t];a&&("undefined"==typeof a[o]||""===a[o])&&e++}}return 0===e}function v(){var e=null,t=function(){if(e&&clearTimeout(e),l()&&F.length>0){E=!0;for(var n=0;n<F.length;n++)O(F[n].params,I);h(A.user,A.header,F),F=[]}else e=setTimeout(t,100)};t()}function w(){var e=C,t=J;return _?(e=T,t=k):(H||(e=K,t=P),D&&(e=e.replace(/^https:\/\//,"http://"),t=t.replace(/^https:\/\//,"http://"))),[e,t]}function y(e){m(w()[0],e)}function m(e,t,n){try{var r=XMLHttpRequest||window.ActiveXObject("Microsoft.XMLHTTP"),o=new r;o.onreadystatechange=function(){4!==this.readyState||this.status>=200&&this.status<300?4===this.readyState&&"function"==typeof n&&n():(_&&console.log(this.status),g(t,n))},o.open("post",e),o.setRequestHeader("Content-Type","application/json"),o.send(x.stringify(t))}catch(a){if(g(t,n),_)throw a}}function g(e,t){var n=w()[1],r=j(e),o=new Image(1,1);o.onerror=function(){},o.onload=function(){"function"==typeof t&&t()},o.src=n+"?"+r}function b(){var e,t={},n={},r=navigator.userAgent.toLowerCase();return navigator.appVersion.match(/MSIE 6./i)?(t.type="IE",t.version=6,t):((e=r.match(/msie ([\d.]+)/))?n.ie=e[1]:(e=r.match(/firefox\/([\d.]+)/))?n.firefox=e[1]:(e=r.match(/chrome\/([\d.]+)/))?n.chrome=e[1]:(e=r.match(/opera.([\d.]+)/))?n.opera=e[1]:(e=r.match(/version\/([\d.]+).*safari/))?n.safari=e[1]:0,n.ie?(t.type="IE",t.version=n.ie):n.firefox?(t.type="Firefox",t.version=n.firefox):n.chrome?(t.type="Chrome",t.version=n.chrome):n.opera?(t.type="Opera",t.version=n.opera):n.safari&&(t.type="Safari",t.version=n.safari),t)}function S(){b();O(A.header,{})}function j(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+x.stringify(e[n]));return t="&"===t[0]?t.slice(1):t}function O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function M(e){return"[object Array]"===Object.prototype.toString.call(e)}var x=window.JSON||function(){function e(e){return new Function("return ("+e+")")()}var t=function(){function e(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/["\\\x00-\x1f]/g,function(e){var t=o[e];return t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),'"'+e+'"'}function t(e){var t,n,r,o=["["],a=e.length;for(n=0;a>n;n++)switch(r=e[n],typeof r){case"undefined":case"function":case"unknown":break;default:t&&o.push(","),o.push(x.stringify(r)),t=1}return o.push("]"),o.join("")}function n(e){return 10>e?"0"+e:e}function r(e){return'"'+e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getTodayDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+'"'}var o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(n){switch(typeof n){case"undefined":return"undefined";case"number":return isFinite(n)?String(n):"null";case"string":return e(n);case"boolean":return String(n);default:if(null===n)return"null";if(n instanceof Array)return t(n);if(n instanceof Date)return r(n);var o,a,i=["{"],s=x.stringify;for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f))switch(a=n[f],typeof a){case"undefined":case"unknown":case"function":break;default:o&&i.push(","),o=1,i.push(s(f)+":"+s(a))}return i.push("}"),i.join("")}}}();return{parse:e,stringify:t}}(),D=!1,H=!0,C="https://mcs.byted.org/v1/json",J="https://mcs.byted.org/v1/gif",K="https://mcs.snssdk.com/v1/json",P="https://mcs.snssdk.com/v1/json",T="http://10.8.131.217:9908/v1/json",k="http://10.8.131.217:9908/v1/gif",A={user:{},header:{},events:[],verbose:0,caller:""},I={},q={user:["user_unique_id"],header:["app_id"],eventCommonParams:[],customHeaders:[]},E=!1,_=!1,F=[];if(p.send=p,p.setUser=e,p.setHeader=t,p.setAppId=n,p.setDebug=c,p.setCaller=d,p.setRequiredKeys=i,p.setEventCommonParams=a,p.setHeaderHeaders=r,p.setCustomHeader=o,p.disableHttps=f,p.setIntranetMode=u,window.MarioJSSDKObject=window.MarioJSSDKObject||"collectEvent",window[window.MarioJSSDKObject]){S(),q=window[window.MarioJSSDKObject].r||q,A.header.app_id=window[window.MarioJSSDKObject].id;var L=window[window.MarioJSSDKObject].ready;"function"==typeof L&&L(p);var R=window[window.MarioJSSDKObject].q;if(R)for(var X=0;X<R.length;X++)F.push({event:R[X][0],params:R[X][1]})}return v(),p});